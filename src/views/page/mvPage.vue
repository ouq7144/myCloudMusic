<template>
    <div class="box" ref="mv_Box">
        <div class="top_box">
            <div class="left_box">
                <div class="mv">
                    <h4 class="mv_detail">MV详情</h4>
                    <div class="video_div">
                        <video :src="this.mvUrl" controls class="video_box" ref="video" @loadeddata="autoplay"></video>
                    </div>
                    <div class="mv_info">
                        <el-image :src="authorPic" cover="fit" class="author_pic"></el-image>
                        <div class="author_name">
                            <span>{{ this.authorName }}</span>
                        </div>
                    </div>
                    <div class="mv_name">
                        <h3>{{ this.mvName }}</h3>
                        <div class="mv_publish">
                            <span class="publish_time">发布：{{ this.publishTime }}</span>
                            <span class="play_count">播放：{{ util.filterPlayCount(this.playCount) }}</span>
                        </div>
                        <div class="btn_group">
                            <el-button class="btns" round size="small" @click="likeMv">
                                <svg t="1658554485792" v-show="!liked" class="icon liked_icons" viewBox="0 0 1024 1024"
                                    version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2265" width="14" height="14">
                                    <path
                                        d="M890.908 429.534c-20.66-26.05-51.585-40.99-84.84-40.99l-189.34 0c10.34-28.83 17.18-60.165 19.615-90.48 3.785-47.147-3.465-89.02-20.955-121.095-21.53-39.46-58.18-64.072-105.997-71.177-21.662-3.22-40.292 0.945-55.377 12.372-30.495 23.102-36.092 67.065-42.575 117.97-5.182 40.692-11.055 86.817-30.79 119.877-13.172 22.065-38.807 51.397-109.092 51.397l-73.345 0c-48.842 0-88.58 39.722-88.58 88.545l0 334.754c0 48.82 39.737 88.545 88.58 88.545l534.336 0c24.33 0 48.22-8.325 67.275-23.43 19.06-15.11 32.605-36.475 38.145-60.155l73.52-314.264C919.058 489.054 911.553 455.569 890.908 429.534zM168.672 830.708 168.672 495.956c0-16.27 13.252-29.505 29.537-29.505l62.232 0 0 393.762-62.232 0C181.925 860.213 168.672 846.978 168.672 830.708zM853.998 507.956l-73.52 314.272c-5.23 22.36-24.94 37.985-47.93 37.985L319.484 860.213 319.484 462.169c49.877-9.52 87.4-34.92 111.86-75.895 26.05-43.64 32.75-96.257 38.662-142.68 2.67-20.977 5.193-40.79 9.2-55.99 4.297-16.302 8.745-21.08 10.457-22.377 1.96-1.485 5.677-1.835 11.05-1.035 29.615 4.4 50.175 17.83 62.84 41.052 25.99 47.642 14.505 128.052-10.265 182.86-5.93 13.127-4.83 28.167 2.96 40.232 7.78 12.052 21.01 19.247 35.395 19.247l214.424 0c15.125 0 29.185 6.792 38.58 18.637C854.028 478.049 857.438 493.261 853.998 507.956z"
                                        p-id="2266" fill="#707070"></path>
                                </svg>
                                <svg t="1658554485792" v-show="liked" class="icon liked_icons" viewBox="0 0 1024 1024"
                                    version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2265" width="14" height="14">
                                    <path
                                        d="M890.908 429.534c-20.66-26.05-51.585-40.99-84.84-40.99l-189.34 0c10.34-28.83 17.18-60.165 19.615-90.48 3.785-47.147-3.465-89.02-20.955-121.095-21.53-39.46-58.18-64.072-105.997-71.177-21.662-3.22-40.292 0.945-55.377 12.372-30.495 23.102-36.092 67.065-42.575 117.97-5.182 40.692-11.055 86.817-30.79 119.877-13.172 22.065-38.807 51.397-109.092 51.397l-73.345 0c-48.842 0-88.58 39.722-88.58 88.545l0 334.754c0 48.82 39.737 88.545 88.58 88.545l534.336 0c24.33 0 48.22-8.325 67.275-23.43 19.06-15.11 32.605-36.475 38.145-60.155l73.52-314.264C919.058 489.054 911.553 455.569 890.908 429.534zM168.672 830.708 168.672 495.956c0-16.27 13.252-29.505 29.537-29.505l62.232 0 0 393.762-62.232 0C181.925 860.213 168.672 846.978 168.672 830.708zM853.998 507.956l-73.52 314.272c-5.23 22.36-24.94 37.985-47.93 37.985L319.484 860.213 319.484 462.169c49.877-9.52 87.4-34.92 111.86-75.895 26.05-43.64 32.75-96.257 38.662-142.68 2.67-20.977 5.193-40.79 9.2-55.99 4.297-16.302 8.745-21.08 10.457-22.377 1.96-1.485 5.677-1.835 11.05-1.035 29.615 4.4 50.175 17.83 62.84 41.052 25.99 47.642 14.505 128.052-10.265 182.86-5.93 13.127-4.83 28.167 2.96 40.232 7.78 12.052 21.01 19.247 35.395 19.247l214.424 0c15.125 0 29.185 6.792 38.58 18.637C854.028 478.049 857.438 493.261 853.998 507.956z"
                                        p-id="2266" fill="#EC4141"></path>
                                </svg>
                                <span>{{ liked ? '已赞' : '赞'}}（{{ likedCount }}）</span>
                            </el-button>
                            <el-button class="btns" round size="small" @click="collectMv">
                                <svg t="1659112103554" v-show="!isCollected" class="icon liked_icons"
                                    viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4695"
                                    width="14" height="14">
                                    <path
                                        d="M248.482281 938.000324c-4.306072 0-8.592702-1.336438-12.211113-3.967358-6.395664-4.646833-9.600659-12.521175-8.264221-20.314675l48.430012-282.363949L71.288626 431.382914c-5.66093-5.519714-7.698333-13.772678-5.255701-21.291932 2.444679-7.519254 8.943696-13.000082 16.768919-14.137998l283.508006-41.195238L493.099535 97.853655c3.498684-7.089465 10.720156-11.577686 18.627243-11.577686 7.907087 0 15.127536 4.489244 18.627243 11.577686l126.788661 256.904091 283.510052 41.195238c7.823176 1.137916 14.322194 6.618744 16.766872 14.137998 2.442632 7.519254 0.405229 15.773242-5.255701 21.291932L747.012502 631.354342l48.430012 282.363949c1.336438 7.7935-1.868557 15.667841-8.264221 20.314675-6.399757 4.646833-14.878872 5.257747-21.874193 1.582031L511.726777 802.298666 258.146385 935.614997C255.107165 937.211355 251.789607 938.000324 248.482281 938.000324zM130.422422 431.011454 313.25654 609.228415c4.894474 4.7727 7.128351 11.647271 5.974062 18.385742l-43.163055 251.64532 225.994104-118.811989c6.048763-3.180436 13.282514-3.180436 19.331277 0l225.992057 118.811989-43.163055-251.64532c-1.154289-6.738471 1.079588-13.613042 5.974062-18.385742l182.833095-178.216961-252.665557-36.71418c-6.767124-0.983397-12.614296-5.233188-15.641235-11.362792L511.726777 153.97893 398.729214 382.934482c-3.025916 6.129604-8.874111 10.379395-15.639189 11.362792L130.422422 431.011454z"
                                        p-id="4696" fill="#707070"></path>
                                </svg>
                                <svg t="1659112103554" v-show="isCollected" class="icon liked_icons"
                                    viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4695"
                                    width="14" height="14">
                                    <path
                                        d="M248.482281 938.000324c-4.306072 0-8.592702-1.336438-12.211113-3.967358-6.395664-4.646833-9.600659-12.521175-8.264221-20.314675l48.430012-282.363949L71.288626 431.382914c-5.66093-5.519714-7.698333-13.772678-5.255701-21.291932 2.444679-7.519254 8.943696-13.000082 16.768919-14.137998l283.508006-41.195238L493.099535 97.853655c3.498684-7.089465 10.720156-11.577686 18.627243-11.577686 7.907087 0 15.127536 4.489244 18.627243 11.577686l126.788661 256.904091 283.510052 41.195238c7.823176 1.137916 14.322194 6.618744 16.766872 14.137998 2.442632 7.519254 0.405229 15.773242-5.255701 21.291932L747.012502 631.354342l48.430012 282.363949c1.336438 7.7935-1.868557 15.667841-8.264221 20.314675-6.399757 4.646833-14.878872 5.257747-21.874193 1.582031L511.726777 802.298666 258.146385 935.614997C255.107165 937.211355 251.789607 938.000324 248.482281 938.000324zM130.422422 431.011454 313.25654 609.228415c4.894474 4.7727 7.128351 11.647271 5.974062 18.385742l-43.163055 251.64532 225.994104-118.811989c6.048763-3.180436 13.282514-3.180436 19.331277 0l225.992057 118.811989-43.163055-251.64532c-1.154289-6.738471 1.079588-13.613042 5.974062-18.385742l182.833095-178.216961-252.665557-36.71418c-6.767124-0.983397-12.614296-5.233188-15.641235-11.362792L511.726777 153.97893 398.729214 382.934482c-3.025916 6.129604-8.874111 10.379395-15.639189 11.362792L130.422422 431.011454z"
                                        p-id="4696" fill="#EC4141"></path>
                                </svg>
                                <span>{{ isCollected ? '已收藏' : '收藏'}}（{{ subCount }}）</span>
                            </el-button>
                            <el-button class="btns" round size="small">
                                <svg t="1658554856163" class="icon liked_icons" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="3251" width="14" height="14">
                                    <path
                                        d="M512 939.804444c-57.612929 0-113.570909-11.274343-166.322424-33.616161-50.889697-21.514343-96.504242-52.337778-135.809293-91.539394C170.666667 775.447273 139.843232 729.729293 118.328889 678.839596 96.193939 626.191515 84.816162 570.233535 84.816162 512.620606s11.274343-113.570909 33.616161-166.322424c21.514343-50.889697 52.337778-96.504242 91.539394-135.809293 39.201616-39.201616 84.919596-70.025051 135.809293-91.539394 52.648081-22.238384 108.606061-33.616162 166.322424-33.616162h1.034344l-0.103435 57.923233h-0.930909c-98.676364 0-191.353535 38.374141-261.068282 108.192323-69.818182 69.818182-108.295758 162.495354-108.295758 261.171717s38.374141 191.353535 108.192323 261.068283c69.714747 69.818182 162.495354 108.192323 261.068283 108.192323 98.572929 0 191.250101-38.374141 261.068283-108.088889C842.78303 704.077576 881.260606 611.400404 881.260606 512.827475h57.923232c0 57.612929-11.377778 113.570909-33.616161 166.21899-21.514343 50.889697-52.337778 96.504242-91.539394 135.705858s-84.919596 69.921616-135.705859 91.43596c-52.751515 22.341818-108.606061 33.616162-166.322424 33.616161zM938.149495 352.711111h-57.923232V145.73899H672.530101v-57.923232H938.149495V352.711111z m0 0"
                                        p-id="3252" fill="#707070"></path>
                                    <path
                                        d="M888.371717 96.012929l40.96 40.96L560.484848 505.806869l-40.96-40.96L888.371717 96.012929z m0 0"
                                        p-id="3253" fill="#707070"></path>
                                </svg>
                                <span>分享（{{ this.shareCount }}）</span>
                            </el-button>
                            <el-button class="btns" round size="small" v-if="/^\d+$/.test(this.id)">
                                <svg t="1659112583799" class="icon liked_icons" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="6492" width="14" height="14">
                                    <path
                                        d="M514 114.4c-220 0-398.8 178.9-398.8 398.8S294 912 514 912s398.8-178.9 398.8-398.8S734 114.4 514 114.4z m0 754.9c-196.4 0-356.1-159.8-356.1-356.1S317.6 157.1 514 157.1c196.4 0 356.1 159.8 356.1 356.1S710.4 869.3 514 869.3z"
                                        p-id="6493" fill="#707070"></path>
                                    <path
                                        d="M540.8 614.7c-1.7 1.7-3.5 3.2-5.5 4.5V252.1h-42.7v367.2c-1.9-1.3-3.8-2.8-5.5-4.5L368.9 496.5l-30.2 30.2L457 644.9c15.7 15.7 36.4 23.6 57 23.6 20.7 0 41.3-7.9 57-23.6l118.3-118.3-30.2-30.2-118.3 118.3zM358.6 697.4h310.7v42.7H358.6z"
                                        p-id="6494" fill="#707070"></path>
                                </svg>
                                <span>下载MV</span>
                            </el-button>
                            <el-button class="report_btn" type="text">举报</el-button>
                        </div>
                        <div class="bottom_box">
                        </div>
                    </div>
                </div>
                <div class="comment">
                    <div class="comment_box">
                        <div class="comment">
                            <div class="input_comment">
                                <el-input class="input" type="textarea" :rows="3" placeholder="请输入评论"
                                    v-model="yourComment" resize="none" maxlength="140" :show-word-limit="true">
                                </el-input>
                                <div class="tools">
                                    <div>
                                        <el-popover placement="bottom" width="300" trigger="click"
                                            popper-class="theme_box">
                                            <div class="emoji_box">
                                                <div @click="addEmoji(item)" v-for="(item, index) in emojiList"
                                                    :key="index" class="emoji_item">
                                                    <span>{{ String.fromCodePoint(item) }}</span>
                                                </div>
                                            </div>
                                            <svg slot="reference" t="1658519360638" class="icon icons"
                                                viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                p-id="2342" width="20" height="20">
                                                <path
                                                    d="M495.465 830.665c-187.138 0-264.948-168.222-268.193-175.401l62.966-28.307c2.486 5.49 62.207 134.667 205.194 134.667 153.067-1.795 211.302-129.213 213.685-134.633l63.103 27.996c-3.141 7.077-79.054 173.364-273.13 175.643l-3.625 0.034zM500.16 991.221c-256.974 0-466.034-209.060-466.034-466.034s209.060-466.034 466.034-466.034 466.034 209.060 466.034 466.034-209.060 466.034-466.034 466.034zM500.16 128.196c-218.897 0-396.991 178.094-396.991 396.991s178.094 396.991 396.991 396.991 396.991-178.094 396.991-396.991-178.059-396.991-396.991-396.991zM311.088 444.27c0 29.689 24.062 53.818 53.818 53.818s53.818-24.096 53.818-53.818-24.062-53.818-53.818-53.818-53.818 24.096-53.818 53.818zM580.765 444.27c0 29.689 24.062 53.818 53.818 53.818s53.818-24.096 53.818-53.818-24.062-53.818-53.818-53.818-53.818 24.096-53.818 53.818z"
                                                    p-id="2343"></path>
                                            </svg>
                                        </el-popover>
                                        <el-popover placement="bottom" width="200" trigger="click"
                                            popper-class="theme_box" v-show="followList && followList.length > 0">
                                            <div @click="addContacts(item)" v-for="item in followList"
                                                :key="item.userId" class="toplic_item">
                                                <span>@{{ item.nickname }}</span>
                                            </div>
                                            <svg slot="reference" t="1658519439106" class="icon icons"
                                                viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                p-id="2899" width="20" height="20">
                                                <path
                                                    d="M513.221155 1023.997336a511.99667 511.99667 0 0 1 0-1023.993339 521.099819 521.099819 0 0 1 375.67145 157.861939 478.692463 478.692463 0 0 1 133.216827 355.24487v2.664337c-27.531477 175.846211-139.877668 263.32526-234.461615 259.328755-73.047226-3.108393-123.669621-56.839179-129.220321-136.769275a22.202804 22.202804 0 0 1 20.648608-23.090916 22.202804 22.202804 0 0 1 23.757001 20.648608c3.774477 56.617151 37.078683 93.251779 86.812965 95.472059 75.933591 2.664337 164.522781-71.49303 188.279781-222.028044a434.952938 434.952938 0 0 0-121.227312-321.27458A476.916239 476.916239 0 0 0 513.221155 44.409605a467.591061 467.591061 0 0 0 0 935.182122 480.912743 480.912743 0 0 0 365.680189-166.076977 22.202804 22.202804 0 0 1 31.305954-2.664337 22.202804 22.202804 0 0 1 2.664336 31.305955 526.428492 526.428492 0 0 1-399.650479 181.840968z"
                                                    fill="#666666" p-id="2900"></path>
                                                <path
                                                    d="M488.354014 773.549702a212.924894 212.924894 0 0 1-133.216826-49.95631c-112.568218-88.811218-121.44934-215.145175-24.423085-346.363749 86.590937-117.008779 238.680147-151.423126 339.258851-77.265759s116.786751 229.799026 32.860151 343.477384c-54.840927 73.713311-122.115424 119.451088-189.61195 128.33221a197.382931 197.382931 0 0 1-24.867141 1.776224z m-121.227312-369.898721c-58.171348 78.3759-102.354928 191.388174 16.208047 285.084008a164.300753 164.300753 0 0 0 124.779761 39.076936c55.507011-7.326925 112.124162-46.847917 159.638164-111.014022 69.494778-93.917863 58.837432-220.029792-23.757001-281.309532s-204.931885-29.307702-276.868971 67.940582z"
                                                    fill="#666666" p-id="2901"></path>
                                            </svg>
                                        </el-popover>
                                        <el-popover placement="bottom" width="200" trigger="click"
                                            popper-class="theme_box">
                                            <div @click="addToplic(item)" v-for="item in topicList" :key="item.actId"
                                                class="toplic_item">
                                                <span>#{{ item.title }}#</span>
                                            </div>
                                            <svg slot="reference" t="1658519477875" class="icon icons"
                                                viewBox="0 0 1219 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                p-id="3074" width="20" height="20">
                                                <path
                                                    d="M1194.381437 280.314011h-108.713086a24.375131 24.375131 0 0 1 0-48.750263H1194.381437a24.375131 24.375131 0 0 1 0 48.750263zM955.261398 280.314011H73.125394a24.375131 24.375131 0 0 1 0-48.750263h882.136004a24.375131 24.375131 0 0 1 0 48.750263zM1145.631174 799.991811H390.002102a24.375131 24.375131 0 0 1 0-48.750262h755.629072a24.375131 24.375131 0 1 1 0 48.750262zM250.332599 799.991811H24.375131a24.375131 24.375131 0 0 1 0-48.750262h225.957468a24.375131 24.375131 0 1 1 0 48.750262z"
                                                    fill="#666666" p-id="3075"></path>
                                                <path
                                                    d="M167.700904 1023.999269a20.231359 20.231359 0 0 1-8.287545-1.706259 24.375131 24.375131 0 0 1-14.625079-31.200169L499.690193 16.087587a24.399506 24.399506 0 0 1 45.825247 16.81884l-354.901913 975.005255a24.375131 24.375131 0 0 1-22.912623 16.087587zM684.69744 1023.999269a20.231359 20.231359 0 0 1-8.287545-1.706259 24.375131 24.375131 0 0 1-14.625078-31.200169l354.901912-975.005254a24.399506 24.399506 0 0 1 45.825247 16.81884l-354.901912 975.005255a24.375131 24.375131 0 0 1-22.912624 16.087587z"
                                                    fill="#666666" p-id="3076"></path>
                                            </svg>
                                        </el-popover>
                                    </div>
                                    <div>
                                        <el-button class="send_comment_btn" round @click="sendComment(yourComment)">评论
                                        </el-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="no_commonets" v-show="hotComments.length == 0 && comments.length == 0">
                            <span>还没有评论，快来抢沙发~</span>
                        </div>
                        <div class="comment_list">
                            <h5 class="hot_comments" v-show="hotComments.length > 0">精彩评论</h5>
                            <div v-for="item in hotComments" :key="item.commentId" class="each_comment"
                                v-show="hotComments.length > 0">
                                <el-image :src="item.user.avatarUrl || ''" class="user_pic" lazy
                                    @click="gotoPersonalHomePage(item.user.userId)"></el-image>
                                <div class="user_info">
                                    <div>
                                        <span class="user_info_color" @click="gotoPersonalHomePage(item.user.userId)">{{
                                        item.user.nickname }}：</span>
                                        <span>{{ item.content }}</span>
                                    </div>
                                    <div>
                                        <div v-for="jtem in item.beReplied">
                                            <div class="replied_comment">
                                                <span class="user_info_color">@{{ jtem.user.nickname }}：</span>
                                                <span>{{ jtem.content }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <span class="user_info_time">{{ item.timeStr }}</span>
                                        <span class="user_info_time">{{ util.filterSeconds(item.time) }}</span>
                                        <div class="liked">
                                            <span class="report">举报</span>
                                            <span class="liked_margin">|</span>
                                            <svg t="1658554485792" v-show="!item.liked" @click="like(item, 1)"
                                                class="icon liked_icons" viewBox="0 0 1024 1024" version="1.1"
                                                xmlns="http://www.w3.org/2000/svg" p-id="2265" width="14" height="14">
                                                <path
                                                    d="M890.908 429.534c-20.66-26.05-51.585-40.99-84.84-40.99l-189.34 0c10.34-28.83 17.18-60.165 19.615-90.48 3.785-47.147-3.465-89.02-20.955-121.095-21.53-39.46-58.18-64.072-105.997-71.177-21.662-3.22-40.292 0.945-55.377 12.372-30.495 23.102-36.092 67.065-42.575 117.97-5.182 40.692-11.055 86.817-30.79 119.877-13.172 22.065-38.807 51.397-109.092 51.397l-73.345 0c-48.842 0-88.58 39.722-88.58 88.545l0 334.754c0 48.82 39.737 88.545 88.58 88.545l534.336 0c24.33 0 48.22-8.325 67.275-23.43 19.06-15.11 32.605-36.475 38.145-60.155l73.52-314.264C919.058 489.054 911.553 455.569 890.908 429.534zM168.672 830.708 168.672 495.956c0-16.27 13.252-29.505 29.537-29.505l62.232 0 0 393.762-62.232 0C181.925 860.213 168.672 846.978 168.672 830.708zM853.998 507.956l-73.52 314.272c-5.23 22.36-24.94 37.985-47.93 37.985L319.484 860.213 319.484 462.169c49.877-9.52 87.4-34.92 111.86-75.895 26.05-43.64 32.75-96.257 38.662-142.68 2.67-20.977 5.193-40.79 9.2-55.99 4.297-16.302 8.745-21.08 10.457-22.377 1.96-1.485 5.677-1.835 11.05-1.035 29.615 4.4 50.175 17.83 62.84 41.052 25.99 47.642 14.505 128.052-10.265 182.86-5.93 13.127-4.83 28.167 2.96 40.232 7.78 12.052 21.01 19.247 35.395 19.247l214.424 0c15.125 0 29.185 6.792 38.58 18.637C854.028 478.049 857.438 493.261 853.998 507.956z"
                                                    p-id="2266" fill="#707070"></path>
                                            </svg>
                                            <svg t="1662356660260" v-show="item.liked" @click="like(item, 0)"
                                                class="icon liked_icons" viewBox="0 0 1024 1024" version="1.1"
                                                xmlns="http://www.w3.org/2000/svg" p-id="2406" width="14" height="14">
                                                <path
                                                    d="M64 483.04V872c0 37.216 30.144 67.36 67.36 67.36H192V416.32l-60.64-0.64A67.36 67.36 0 0 0 64 483.04zM857.28 344.992l-267.808 1.696c12.576-44.256 18.944-83.584 18.944-118.208 0-78.56-68.832-155.488-137.568-145.504-60.608 8.8-67.264 61.184-67.264 126.816v59.264c0 76.064-63.84 140.864-137.856 148L256 416.96v522.4h527.552a102.72 102.72 0 0 0 100.928-83.584l73.728-388.96a102.72 102.72 0 0 0-100.928-121.824z"
                                                    p-id="2407" fill="#EC4141"></path>
                                            </svg>
                                            <span>{{ item.likedCount }}</span>
                                            <span class="liked_margin">|</span>
                                            <svg t="1658554856163" class="icon liked_icons" viewBox="0 0 1024 1024"
                                                version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3251" width="14"
                                                height="14">
                                                <path
                                                    d="M512 939.804444c-57.612929 0-113.570909-11.274343-166.322424-33.616161-50.889697-21.514343-96.504242-52.337778-135.809293-91.539394C170.666667 775.447273 139.843232 729.729293 118.328889 678.839596 96.193939 626.191515 84.816162 570.233535 84.816162 512.620606s11.274343-113.570909 33.616161-166.322424c21.514343-50.889697 52.337778-96.504242 91.539394-135.809293 39.201616-39.201616 84.919596-70.025051 135.809293-91.539394 52.648081-22.238384 108.606061-33.616162 166.322424-33.616162h1.034344l-0.103435 57.923233h-0.930909c-98.676364 0-191.353535 38.374141-261.068282 108.192323-69.818182 69.818182-108.295758 162.495354-108.295758 261.171717s38.374141 191.353535 108.192323 261.068283c69.714747 69.818182 162.495354 108.192323 261.068283 108.192323 98.572929 0 191.250101-38.374141 261.068283-108.088889C842.78303 704.077576 881.260606 611.400404 881.260606 512.827475h57.923232c0 57.612929-11.377778 113.570909-33.616161 166.21899-21.514343 50.889697-52.337778 96.504242-91.539394 135.705858s-84.919596 69.921616-135.705859 91.43596c-52.751515 22.341818-108.606061 33.616162-166.322424 33.616161zM938.149495 352.711111h-57.923232V145.73899H672.530101v-57.923232H938.149495V352.711111z m0 0"
                                                    p-id="3252" fill="#707070"></path>
                                                <path
                                                    d="M888.371717 96.012929l40.96 40.96L560.484848 505.806869l-40.96-40.96L888.371717 96.012929z m0 0"
                                                    p-id="3253" fill="#707070"></path>
                                            </svg>
                                            <span class="liked_margin">|</span>
                                            <svg @click="reply(item)" t="1658554967236" class="icon liked_icons" viewBox="0 0 1024 1024"
                                                version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7706" width="14"
                                                height="14">
                                                <path
                                                    d="M512.146827 268.510985c-250.902034 0-454.505322 157.57406-454.505322 359.095851 0 77.452531 32.639121 168.259723 83.298552 213.54786C166.24668 863.780505 88.131465 990.268512 109.075322 1018.193654c23.957624 31.943141 164.908706-79.128039 205.700895-61.760749C355.568406 973.800196 441.499439 987.04638 512.146827 987.04638c250.902034 0 447.742067-158.01764 454.089667-359.439545C972.069626 442.506103 768.001278 268.510985 512.146827 268.510985zM511.997535 950.528886C447.362645 950.528886 362.014817 933.770578 323.347087 920.455656c-38.351961-13.206444-179.982913 66.085924-179.982913 66.085924s52.530415-136.615167 29.151701-161.97227c-42.140114-45.708088-76.209862-124.513914-76.209862-195.375037 0-184.372531 186.277885-324.240977 415.827925-324.240977s415.35105 154.807323 415.447714 324.240977C927.690131 821.643613 741.54865 950.528886 511.997535 950.528886zM311.488568 622.945485m-64.394304 0a59.955 59.955 0 1 0 128.788609 0 59.955 59.955 0 1 0-128.788609 0ZM504.000204 622.945485m-64.394304 0a59.955 59.955 0 1 0 128.788609 0 59.955 59.955 0 1 0-128.788609 0ZM696.511839 622.945485m-64.394304 0a59.955 59.955 0 1 0 128.788609 0 59.955 59.955 0 1 0-128.788609 0Z"
                                                    p-id="7707" fill="#707070"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h5 class="hot_comments" v-show="comments.length > 0">最新评论（{{ totalCount }}）</h5>
                            <div v-for="item in comments" :key="item.commentId" class="each_comment"
                                v-show="comments.length > 0">
                                <img :src="item.user.avatarUrl || ''" class="user_pic"
                                    @click="gotoPersonalHomePage(item.user.userId)">
                                <div class="user_info">
                                    <div>
                                        <span class="user_info_color" @click="gotoPersonalHomePage(item.user.userId)">{{
                                        item.user.nickname }}：</span>
                                        <span>{{ item.content }}</span>
                                    </div>
                                    <div>
                                        <div v-for="jtem in item.beReplied">
                                            <div class="replied_comment">
                                                <span class="user_info_color">@{{ jtem.user.nickname }}：</span>
                                                <span>{{ jtem.content }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <span class="user_info_time">{{ item.timeStr }}</span>
                                        <span class="user_info_time">{{ util.filterSeconds(item.time) }}</span>
                                        <div class="liked">
                                            <span class="report">举报</span>
                                            <span class="liked_margin">|</span>
                                            <svg t="1658554485792" v-show="!item.liked" @click="like(item, 1)"
                                                class="icon liked_icons" viewBox="0 0 1024 1024" version="1.1"
                                                xmlns="http://www.w3.org/2000/svg" p-id="2265" width="14" height="14">
                                                <path
                                                    d="M890.908 429.534c-20.66-26.05-51.585-40.99-84.84-40.99l-189.34 0c10.34-28.83 17.18-60.165 19.615-90.48 3.785-47.147-3.465-89.02-20.955-121.095-21.53-39.46-58.18-64.072-105.997-71.177-21.662-3.22-40.292 0.945-55.377 12.372-30.495 23.102-36.092 67.065-42.575 117.97-5.182 40.692-11.055 86.817-30.79 119.877-13.172 22.065-38.807 51.397-109.092 51.397l-73.345 0c-48.842 0-88.58 39.722-88.58 88.545l0 334.754c0 48.82 39.737 88.545 88.58 88.545l534.336 0c24.33 0 48.22-8.325 67.275-23.43 19.06-15.11 32.605-36.475 38.145-60.155l73.52-314.264C919.058 489.054 911.553 455.569 890.908 429.534zM168.672 830.708 168.672 495.956c0-16.27 13.252-29.505 29.537-29.505l62.232 0 0 393.762-62.232 0C181.925 860.213 168.672 846.978 168.672 830.708zM853.998 507.956l-73.52 314.272c-5.23 22.36-24.94 37.985-47.93 37.985L319.484 860.213 319.484 462.169c49.877-9.52 87.4-34.92 111.86-75.895 26.05-43.64 32.75-96.257 38.662-142.68 2.67-20.977 5.193-40.79 9.2-55.99 4.297-16.302 8.745-21.08 10.457-22.377 1.96-1.485 5.677-1.835 11.05-1.035 29.615 4.4 50.175 17.83 62.84 41.052 25.99 47.642 14.505 128.052-10.265 182.86-5.93 13.127-4.83 28.167 2.96 40.232 7.78 12.052 21.01 19.247 35.395 19.247l214.424 0c15.125 0 29.185 6.792 38.58 18.637C854.028 478.049 857.438 493.261 853.998 507.956z"
                                                    p-id="2266" fill="#707070"></path>
                                            </svg>
                                            <svg t="1662356660260" v-show="item.liked" @click="like(item, 0)"
                                                class="icon liked_icons" viewBox="0 0 1024 1024" version="1.1"
                                                xmlns="http://www.w3.org/2000/svg" p-id="2406" width="14" height="14">
                                                <path
                                                    d="M64 483.04V872c0 37.216 30.144 67.36 67.36 67.36H192V416.32l-60.64-0.64A67.36 67.36 0 0 0 64 483.04zM857.28 344.992l-267.808 1.696c12.576-44.256 18.944-83.584 18.944-118.208 0-78.56-68.832-155.488-137.568-145.504-60.608 8.8-67.264 61.184-67.264 126.816v59.264c0 76.064-63.84 140.864-137.856 148L256 416.96v522.4h527.552a102.72 102.72 0 0 0 100.928-83.584l73.728-388.96a102.72 102.72 0 0 0-100.928-121.824z"
                                                    p-id="2407" fill="#EC4141"></path>
                                            </svg>
                                            <span>{{ item.likedCount }}</span>
                                            <span class="liked_margin">|</span>
                                            <svg t="1658554856163" class="icon liked_icons" viewBox="0 0 1024 1024"
                                                version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3251" width="14"
                                                height="14">
                                                <path
                                                    d="M512 939.804444c-57.612929 0-113.570909-11.274343-166.322424-33.616161-50.889697-21.514343-96.504242-52.337778-135.809293-91.539394C170.666667 775.447273 139.843232 729.729293 118.328889 678.839596 96.193939 626.191515 84.816162 570.233535 84.816162 512.620606s11.274343-113.570909 33.616161-166.322424c21.514343-50.889697 52.337778-96.504242 91.539394-135.809293 39.201616-39.201616 84.919596-70.025051 135.809293-91.539394 52.648081-22.238384 108.606061-33.616162 166.322424-33.616162h1.034344l-0.103435 57.923233h-0.930909c-98.676364 0-191.353535 38.374141-261.068282 108.192323-69.818182 69.818182-108.295758 162.495354-108.295758 261.171717s38.374141 191.353535 108.192323 261.068283c69.714747 69.818182 162.495354 108.192323 261.068283 108.192323 98.572929 0 191.250101-38.374141 261.068283-108.088889C842.78303 704.077576 881.260606 611.400404 881.260606 512.827475h57.923232c0 57.612929-11.377778 113.570909-33.616161 166.21899-21.514343 50.889697-52.337778 96.504242-91.539394 135.705858s-84.919596 69.921616-135.705859 91.43596c-52.751515 22.341818-108.606061 33.616162-166.322424 33.616161zM938.149495 352.711111h-57.923232V145.73899H672.530101v-57.923232H938.149495V352.711111z m0 0"
                                                    p-id="3252" fill="#707070"></path>
                                                <path
                                                    d="M888.371717 96.012929l40.96 40.96L560.484848 505.806869l-40.96-40.96L888.371717 96.012929z m0 0"
                                                    p-id="3253" fill="#707070"></path>
                                            </svg>
                                            <span class="liked_margin">|</span>
                                            <svg @click="reply(item)" t="1658554967236" class="icon liked_icons" viewBox="0 0 1024 1024"
                                                version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7706" width="14"
                                                height="14">
                                                <path
                                                    d="M512.146827 268.510985c-250.902034 0-454.505322 157.57406-454.505322 359.095851 0 77.452531 32.639121 168.259723 83.298552 213.54786C166.24668 863.780505 88.131465 990.268512 109.075322 1018.193654c23.957624 31.943141 164.908706-79.128039 205.700895-61.760749C355.568406 973.800196 441.499439 987.04638 512.146827 987.04638c250.902034 0 447.742067-158.01764 454.089667-359.439545C972.069626 442.506103 768.001278 268.510985 512.146827 268.510985zM511.997535 950.528886C447.362645 950.528886 362.014817 933.770578 323.347087 920.455656c-38.351961-13.206444-179.982913 66.085924-179.982913 66.085924s52.530415-136.615167 29.151701-161.97227c-42.140114-45.708088-76.209862-124.513914-76.209862-195.375037 0-184.372531 186.277885-324.240977 415.827925-324.240977s415.35105 154.807323 415.447714 324.240977C927.690131 821.643613 741.54865 950.528886 511.997535 950.528886zM311.488568 622.945485m-64.394304 0a59.955 59.955 0 1 0 128.788609 0 59.955 59.955 0 1 0-128.788609 0ZM504.000204 622.945485m-64.394304 0a59.955 59.955 0 1 0 128.788609 0 59.955 59.955 0 1 0-128.788609 0ZM696.511839 622.945485m-64.394304 0a59.955 59.955 0 1 0 128.788609 0 59.955 59.955 0 1 0-128.788609 0Z"
                                                    p-id="7707" fill="#707070"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="colloctor_pagination" v-show="comments.length > 0">
                        <el-pagination background layout="prev, pager, next" :total="totalNum" :page-size="20"
                            @current-change="handleCurrentChange">
                        </el-pagination>
                    </div>
                </div>
            </div>
            <div class="right_box">
                <h4 class="relations">相关推荐</h4>
                <div v-for="item in simiMvList" :key="item.id || item.vid" class="each_item">
                    <img :src="item.cover || item.coverUrl" class="simi_pic" @click="gotoMvPage(item)">
                    <div class="item_right">
                        <span class="right_info first_info" @click="gotoMvPage(item)">{{ item.name || item.title
                        }}</span>
                        <div @click="gotoArtistPage(item.artistId)">
                            <span class="right_info second_info">by</span>
                            <span class="right_info second_info info_margin" v-if="item.artists && item.artists[0]">{{
                            item.artists[0].name }}</span>
                            <span class="right_info second_info info_margin" v-if="item.creator && item.creator[0]">{{
                            item.creator[0].userName }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
import axios from 'axios'
import util from '@/tools/index'
import { emojiList } from '@/tools/lists'
export default {
    data() {
        return {
            mvUrl: '', // MV播放地址
            authorPic: '', // 作者头像
            authorName: '', // 作者名称
            mvName: '', // MV名称
            publishTime: '', // MV上线日期
            playCount: 0, // MV播放次数
            likedCount: 0, // MV点赞数量
            liked: false, // 是否已经点赞该MV
            commentCount: 0, // MV评论数
            shareCount: 0, // MV分享数量
            subCount: 0, // MV收藏数量
            simiMvList: [], // 相似MV列表
            hotComments: [], // MV热评
            comments: [], // MV评论
            yourComment: '', // 你的评论
            totalCount: 0, // 评论总数
            util,
            type: 1, // 1.mv 5.视频
            isCollected: false, // 是否已经收藏
            emojiList,
            topicList: [],
            followList: [],
            replyCommentId: 0, // 要回复的评论id
            replyText: ''
        }
    },
    mounted() {
        // 如果是纯数字则是MV
        if (/^\d+$/.test(util.getUrlParam())) {
            this.getMvInfo()
            this.type = 1
        } else {
            // 如果不是纯数字则是视频
            this.getVedioInfo()
            this.type = 5
        }
        if (localStorage.getItem('profile')) {
            this.checkCollectd()
        }
        this.getHotTopic()
        this.getContacts()
    },
    watch: {
        $route() {
            if (this.type == 1) {
                this.getMvInfo()
            } else if (this.type == 5) {
                this.getVedioInfo()
            }
        },
    },
    methods: {
        // 回复评论
        reply(item) {
            this.yourComment = `回复${item.user.nickname}:` + '\xa0'
            this.replyText = `回复${item.user.nickname}:` + '\xa0'
            this.replyCommentId = item.commentId
            this.$refs.mv_Box.scrollTop = 0
        },
        // 发送评论
        sendComment(comment) {
            if (localStorage.getItem('profile')) {
                if (this.replyCommentId !== 0) {
                    axios.get(`/comment?t=2&type=${this.type}&commentId=${this.replyCommentId}&id=${util.getUrlParam()}&content=${comment.slice(this.replyText.length)}&timerstamp=${Date.now()}`).then(res => {
                        if (res.data && res.data.code == 200) {
                            if (this.type == 1) {
                                // 获取MV热评
                                axios.get(`/comment/new?type=1&id=${util.getUrlParam()}&sortType=2&timerstamp=${Date.now()}`).then(res => {
                                    if (res.data && res.data.code == 200) {
                                        this.hotComments = res.data.data.comments
                                        this.hotComments = this.hotComments.slice(0, 10)
                                    } else {
                                        this.$message(`获取MV热评失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                                    }
                                })
                                // 获取MV评论
                                axios.get(`/comment/new?type=1&id=${util.getUrlParam()}&sortType=3&timerstamp=${Date.now()}`).then(res => {
                                    if (res.data && res.data.code == 200) {
                                        this.comments = res.data.data.comments
                                        this.totalCount = res.data.data.totalCount
                                    } else {
                                        this.$message(`获取MV评论失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                                    }
                                })
                                this.$forceUpdate()
                            } else if (this.type == 5) {
                                // 获取视频评论
                                axios.get(`/comment/video?id=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                                    if (res.data && res.data.code == 200) {
                                        this.hotComments = res.data.hotComments
                                        this.hotComments = this.hotComments.slice(0, 10)
                                        this.comments = res.data.comments
                                        this.totalCount = res.data.total
                                        this.$forceUpdate()
                                    } else {
                                        this.$message(`获取视频评论失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                                    }
                                })
                            }
                        }
                    })
                } else {
                    axios.get(`/comment?t=1&type=${this.type}&id=${util.getUrlParam()}&content=${comment}&timerstamp=${Date.now()}`).then(res => {
                        if (res.data && res.data.code == 200) {
                            console.log(res, '1')
                            let addtimeStr = res.data.comment
                            addtimeStr.timeStr = '刚刚'
                            addtimeStr.likedCount = 0
                            this.comments = [addtimeStr, ...this.comments]
                        }
                    })
                }
                this.yourComment = ''
            } else {
                this.$message('请先登录')
            }
        },
        // 获取最近联系人
        getContacts() {
            if (localStorage.getItem('profile')) {
                axios.get(`/msg/recentcontact`).then(res => {
                        if (res.data && res.data.code == 200) {
                            this.followList = res.data.data.follow
                        } else {
                            this.$message('获取最近联系人失败')
                        }
                    })
            }
        },
        // 为评论添加表情
        addEmoji(item) {
            this.yourComment = this.yourComment  + `${String.fromCodePoint(item)}`
        },
        // 为评论添加@联系人
        addContacts(item) {
            this.yourComment = this.yourComment + '\xa0' + `@${item.nickname}` + '\xa0'
        },
        // 为评论添加话题
        addToplic(item) {
            this.yourComment = this.yourComment + '\xa0' + `#${item.title}#` + '\xa0'
        },
        // 获取热门话题
        getHotTopic() {
            axios.get(`/hot/topic`).then(res => {
                    this.topicList = res.data.hot.splice(0, 8)
                })
        },
        // 点赞评论
        like(item, type) {
            axios.get(`/comment/like?id=${util.getUrlParam()}&cid=${item.commentId}&t=${type}&type=${this.type}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    if (type == 1) {
                        this.$set(item, 'liked', true)
                        this.$set(item, 'likedCount', ++item.likedCount)
                    } else if (type == 0) {
                        this.$set(item, 'liked', false)
                        this.$set(item, 'likedCount', --item.likedCount)
                    }
                } else {
                    this.$message({
                        message: '点赞/取消点赞失败',
                        type: 'error'
                    })
                }
            })
        },
        // 查询该MV/视频是否在收藏列表中
        checkCollectd() {
            axios.get(`/mv/sublist?timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    let arr = res.data.data
                    for (let i = 0; i < arr.length; i++) {
                        if (arr[i].vid == util.getUrlParam()) {
                            this.isCollected = true
                            break
                        }
                    }
                }
            })
        },
        // 收藏该mv
        collectMv() {
            let t
            if (this.isCollected) {
                t = 0
            } else {
                t = 1
            }
            if (this.type == 1) {
                axios.get()
            } else if (this.type == 5) {
                axios.get(`/video/sub?t=${t}&id=${util.getUrlParam()}`).then(res => {
                    if (res.data && res.data.code == 200) {
                        if (t == 0) {
                            this.isCollected = false
                            this.subCount--
                            this.$message({
                                message: '取消收藏成功',
                                type: 'success'
                            })
                        } else if (t == 1) {
                            this.isCollected = true
                            this.subCount++
                            this.$message({
                                message: '收藏成功',
                                type: 'success'
                            })
                        }
                    }
                })
            }
        },
        // 点赞该MV
        likeMv() {
            if (localStorage.getItem('profile')) {
                let like = this.liked ? 0 : 1
                console.log(like)
                axios.get(`/resource/like?t=${like}&type=${this.type}&id=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                    if (res.data && res.data.code == 200) {
                        this.liked = !this.liked
                        if (like == 0) {
                            this.likedCount--
                        } else {
                            this.likedCount++
                        }
                        this.$message({
                            message: `${like == 0 ? '已取消赞' : '已赞'}`,
                            type: 'success'
                        })
                    }
                })
            } else {
                this.$message('请先登录！')
            }
        },
        getVedioInfo() {
            // 获取视频播放地址
            axios.get(`/video/url?id=${util.getUrlParam()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.mvUrl = res.data.urls[0].url
                } else {
                    this.$message(`获取视频播放地址失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取视频信息
            axios.get(`/video/detail?id=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.authorPic = res.data.data.avatarUrl
                    this.authorName = res.data.data.creator.nickname
                    this.mvName = res.data.data.title
                    this.publishTime = util.filterDay(res.data.data.publishTime)
                    this.playCount = res.data.data.playTime
                    this.subCount = res.data.data.subscribeCount
                } else {
                    this.$message(`获取视频信息失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取视频点赞评论分享数量
            axios.get(`/video/detail/info?vid=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.likedCount = res.data.likedCount
                    this.liked = res.data.liked
                    console.log(res.data.liked, '是否点赞过')
                    this.shareCount = res.data.shareCount
                } else {
                    this.$message(`获取视频点赞评论分享数量失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取相关视频
            axios.get(`/related/allvideo?id=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.simiMvList = res.data.data
                } else {
                    this.$message(`获取相关视频失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取视频评论
            axios.get(`/comment/video?id=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.hotComments = res.data.hotComments
                    this.hotComments = this.hotComments.slice(0, 10)
                    this.comments = res.data.comments
                    this.totalCount = res.data.total
                } else {
                    this.$message(`获取视频评论失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
        },
        getMvInfo() {
            // 获取MV播放地址
            axios.get(`/mv/url?id=${util.getUrlParam()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.mvUrl = res.data.data.url
                } else {
                    this.$message(`获取MV播放地址失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取MV信息
            axios.get(`/mv/detail?mvid=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.authorPic = res.data.data.artists[0].img1v1Url
                    this.authorName = res.data.data.artists[0].name
                    this.mvName = res.data.data.name
                    this.publishTime = res.data.data.publishTime
                    this.playCount = res.data.data.playCount
                } else {
                    this.$message(`获取MV信息失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取MV点赞评论分享数量
            axios.get(`/mv/detail/info?mvid=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    console.log(res)
                    this.likedCount = res.data.likedCount
                    this.liked = res.data.liked
                    this.commentCount = res.data.commentCount
                    this.shareCount = res.data.shareCount
                    this.subCount = res.data.subCount
                } else {
                    this.$message(`获取MV点赞评论分享数量失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取相似MV
            axios.get(`/simi/mv?mvid=${util.getUrlParam()}&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.simiMvList = res.data.mvs
                } else {
                    this.$message(`获取相似MV失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取MV热评
            axios.get(`/comment/new?type=1&id=${util.getUrlParam()}&sortType=2&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.hotComments = res.data.data.comments
                    this.hotComments = this.hotComments.slice(0, 10)
                } else {
                    this.$message(`获取MV热评失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
            // 获取MV评论
            axios.get(`/comment/new?type=1&id=${util.getUrlParam()}&sortType=3&timerstamp=${Date.now()}`).then(res => {
                if (res.data && res.data.code == 200) {
                    this.comments = res.data.data.comments
                    this.totalCount = res.data.data.totalCount
                } else {
                    this.$message(`获取MV评论失败，原因为：${res.message || '网络拥挤，请稍后再试'}`)
                }
            })
        },
        autoplay() {
            this.$refs.video.play()
        },
        // 前往个人主页
        gotoPersonalHomePage(id) {
            this.$router.push({ path: `personalHomePage?id=${id}` })
        },
        // 前往MV
        gotoMvPage(item) {
            let id = item.id || item.vid
            this.$router.push({ path: `mvPage?id=${id}` })
        },
        // 前往歌手页
        gotoArtistPage(id) {
            this.$router.push({ path: `artistPage?id=${id}` })
        }
    }
}
</script>

<style lang="less" scoped>
.box {
    position: fixed;
    top: 60px;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #fff;
    z-index: 20;
    display: flex;
    flex-direction: column;
    overflow: auto;

    .top_box {
        display: flex;
        justify-content: center;

        .left_box {
            display: flex;
            flex-direction: column;

            .mv {
                .mv_detail {
                    padding: 15px 0;
                }

                .video_div {
                    width: 600px;
                    height: 320px;
                    background: #000;

                    .video_box {
                        width: 100%;
                        height: 100%;
                    }
                }

                .mv_info {
                    display: flex;
                    align-items: center;
                    margin-top: 15px;

                    .author_pic {
                        height: 50px;
                        width: 50px;
                        border-radius: 50%;
                    }

                    .author_name {
                        margin-left: 15px;
                        font-size: 14px;
                    }
                }

                .mv_name {
                    margin-top: 30px;
                    display: flex;
                    flex-direction: column;

                    .mv_publish {
                        margin-top: 10px;

                        .publish_time {
                            font-size: 12px;
                            color: #999;
                        }

                        .play_count {
                            font-size: 12px;
                            color: #999;
                            margin-left: 20px;
                        }
                    }

                    .btn_group {
                        margin-top: 30px;

                        .btns {
                            color: #000;

                            .liked_icons {
                                margin-right: 5px;
                            }
                        }

                        .btns:hover {
                            background: rgb(242, 242, 242);
                            color: #000;
                            border-color: rgb(225, 225, 225);
                        }

                        .report_btn {
                            float: right;
                            color: #999;
                        }
                    }
                }
            }

            .comment {
                width: 600px;

                .comment_box {
                    margin-top: 20px;

                    .comment {
                        .input_comment {
                            .input {
                                /deep/.el-textarea__inner {
                                    border-color: rgb(229, 229, 229);
                                }
                            }

                            .tools {
                                margin-top: 10px;
                                display: flex;
                                justify-content: space-between;

                                .icons {
                                    padding-right: 10px;
                                }

                                .send_comment_btn {
                                    background-color: #fff;
                                    border-color: rgb(229, 229, 229);
                                    color: #000;
                                }

                                .send_comment_btn:hover {
                                    background-color: rgb(245, 245, 245);
                                }
                            }
                        }
                    }

                    .no_commonets {
                        font-size: 14px;
                        color: rgb(159, 159, 159);
                        text-align: center;
                    }

                    .comment_list {
                        padding-bottom: 30px;

                        .hot_comments {
                            margin: 20px 0;
                        }

                        .each_comment {
                            display: flex;
                            border-bottom: 1px solid #f2f2f2;
                            padding: 20px 0;

                            .user_pic {
                                width: 40px;
                                height: 40px;
                                border-radius: 50%;
                                cursor: pointer;
                            }

                            .replied_comment {
                                padding: 10px;
                                background-color: rgb(245, 245, 245);
                            }

                            .user_info {
                                display: flex;
                                flex-direction: column;
                                justify-content: space-between;
                                margin-left: 10px;
                                font-size: 12px;
                                width: 100%;

                                .user_info_color {
                                    color: rgb(80, 125, 175);
                                    cursor: pointer;
                                }

                                .user_info_color:hover {
                                    color: rgb(11, 88, 176);
                                }

                                .user_info_time {
                                    color: rgb(159, 159, 159);
                                    padding-right: 10px;
                                }

                                .liked {
                                    float: right;
                                    display: flex;
                                    align-items: center;
                                    color: rgb(112, 112, 112);

                                    .liked_margin {
                                        margin: 0 10px;
                                    }

                                    .liked_icons:hover {
                                        -webkit-filter: drop-shadow(0px 0px 0px #000);
                                        cursor: pointer;
                                    }

                                    .report {
                                        cursor: pointer;
                                        color: #707070;
                                    }

                                    .report:hover {
                                        color: #000;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        .right_box {
            margin-left: 30px;

            .relations {
                padding: 15px 0;
            }

            .each_item {
                display: flex;
                align-items: center;
                margin-bottom: 20px;

                .simi_pic {
                    width: 140px;
                    border-radius: 4px;
                    cursor: pointer;
                }

                .item_right {
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                    margin-left: 10px;

                    .right_info {
                        padding: 5px 0;
                        font-size: 14px;
                    }

                    .first_info {
                        width: 150px;
                        cursor: pointer;
                    }

                    .second_info {
                        font-size: 12px;
                        color: #999;
                    }

                    .info_margin {
                        margin-left: 5px;
                        cursor: pointer;
                    }

                    .info_margin:hover {
                        color: #000;
                    }
                }
            }
        }
    }
}

.emoji_box {
    display: flex;
    flex-wrap: wrap;
}
.emoji_item {
    padding: 5px;
    cursor: pointer;
    border: 1px solid transparent;
}

.emoji_item:hover {
    border-color: #3D91EC;
}
.theme_box {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.toplic_item {
    cursor: pointer;
    font-size: 12px;
    padding-left: 20px;
    width: 100%;
    height: 30px;
    line-height: 30px;
    display: flex;
    justify-content: flex-start;
}

/deep/.el-button>span {
    display: flex;
    align-items: center;
}
</style>
